!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MyPromise=e():t.MyPromise=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,s)=>{for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{default:()=>c});const s="fulfilled",o="pending",r="rejected";function i(t,e,s,o){if(e===t)return o(new TypeError("Chaining cycle detected for promise"));let r;if(null==e||"object"!=typeof e&&"function"!=typeof e)s(e);else try{let c=e.then;"function"==typeof c?c.call(e,(e=>{r||(r=!0,i(t,e,s,o))}),(t=>{r||(r=!0,o(t))})):s(e)}catch(t){if(r)return;r=!0,o(t)}}const c=class{constructor(t){this.resolveCallbacks=[],this.rejectCallbacks=[],this.status=o,this.value=void 0,this.reason=void 0,this.resolve=t=>{this.status===o&&(this.value=t,this.status=s,this.resolveCallbacks.forEach((t=>{t(this.value)})))},this.reject=t=>{this.status===o&&(this.reason=t,this.status=r,this.rejectCallbacks.forEach((t=>{t(this.reason)})))};try{t(this.resolve,this.reject)}catch(t){this.reject(t)}}then(t,e){t="function"==typeof t?t:t=>t,e="function"==typeof e?e:t=>{throw t};const c=new Promise(((l,a)=>{this.status===s&&setTimeout((()=>{try{let e=t(this.value);i(c,e,l,a)}catch(t){a(t)}}),0),this.status===r&&setTimeout((()=>{try{let t=e(this.reason);i(c,t,l,a)}catch(t){a(t)}}),0),this.status===o&&(this.resolveCallbacks.push((()=>{setTimeout((()=>{try{let e=t(this.value);i(c,e,l,a)}catch(t){a(t)}}),0)})),this.rejectCallbacks.push((()=>{setTimeout((()=>{try{let t=e(this.value);i(c,t,l,a)}catch(t){a(t)}}),0)})))}));return c}};return e})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9NeVByb21pc2Uvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL015UHJvbWlzZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9NeVByb21pc2Uvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL015UHJvbWlzZS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL015UHJvbWlzZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL015UHJvbWlzZS8uL3Byb21pc2UvcHJvbWlzZS5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJGVUxGSUxMRUQiLCJQRU5ESU5HIiwiUkVKRUNURUQiLCJyZXNvbHZlUHJvbWlzZSIsInByb21pc2UyIiwieCIsInJlc29sdmUiLCJyZWplY3QiLCJUeXBlRXJyb3IiLCJjYWxsZWQiLCJ0aGVuIiwieSIsImVyciIsImUiLCJleGVjdXRvciIsInRoaXMiLCJyZXNvbHZlQ2FsbGJhY2tzIiwicmVqZWN0Q2FsbGJhY2tzIiwic3RhdHVzIiwidW5kZWZpbmVkIiwicmVhc29uIiwiZm9yRWFjaCIsImZuIiwiZXJyb3IiLCJvbkZ1bGZpbGxlZCIsIm9uUmVqZWN0ZWQiLCJwcm9taXNlIiwiUHJvbWlzZSIsInNldFRpbWVvdXQiLCJyZXN1bHQiLCJwdXNoIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQW1CLFVBQUlELElBRXZCRCxFQUFnQixVQUFJQyxJQVJ0QixDQVNHSyxNQUFNLFdBQ1QsTSxtQkNUQSxJQUFJQyxFQUFzQixDQ0ExQixFQUF3QixDQUFDTCxFQUFTTSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hELEVBQW9CRyxFQUFFRixFQUFZQyxLQUFTRixFQUFvQkcsRUFBRVIsRUFBU08sSUFDNUVFLE9BQU9DLGVBQWVWLEVBQVNPLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRSxFQUF3QixDQUFDTSxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0NsRixFQUF5QmQsSUFDSCxvQkFBWGtCLFFBQTBCQSxPQUFPQyxhQUMxQ1YsT0FBT0MsZUFBZVYsRUFBU2tCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFgsT0FBT0MsZUFBZVYsRUFBUyxhQUFjLENBQUVvQixPQUFPLE0sbUNDSnZELE1BQU1DLEVBQVksWUFDWkMsRUFBVSxVQUNWQyxFQUFXLFdBRWpCLFNBQVNDLEVBQWVDLEVBQVVDLEVBQUdDLEVBQVNDLEdBRTFDLEdBQUlGLElBQU1ELEVBRU4sT0FBT0csRUFBTyxJQUFJQyxVQUFVLHdDQUdoQyxJQUFJQyxFQUVKLEdBQVMsTUFBTEosR0FBMkIsaUJBQU5BLEdBQStCLG1CQUFOQSxFQWtDOUNDLEVBQVFELFFBakNSLElBRUksSUFBSUssRUFBT0wsRUFBRUssS0FFTyxtQkFBVEEsRUFFUEEsRUFBS2QsS0FDRFMsR0FDQU0sSUFFUUYsSUFDSkEsR0FBUyxFQUVUTixFQUFlQyxFQUFVTyxFQUFHTCxFQUFTQyxPQUV6Q0ssSUFFUUgsSUFDSkEsR0FBUyxFQUNURixFQUFPSyxPQUlmTixFQUFRRCxHQUVkLE1BQU9RLEdBRUwsR0FBSUosRUFBUSxPQUNaQSxHQUFTLEVBRVRGLEVBQU9NLElBNkduQixRQXJHQSxNQUNJLFlBQVlDLEdBQ1JDLEtBQUtDLGlCQUFtQixHQUN4QkQsS0FBS0UsZ0JBQWtCLEdBR3ZCRixLQUFLRyxPQUFTakIsRUFDZGMsS0FBS2hCLFdBQVFvQixFQUNiSixLQUFLSyxZQUFTRCxFQUdkSixLQUFLVCxRQUFVUCxJQUNQZ0IsS0FBS0csU0FBV2pCLElBQ2hCYyxLQUFLaEIsTUFBUUEsRUFDYmdCLEtBQUtHLE9BQVNsQixFQUNkZSxLQUFLQyxpQkFBaUJLLFNBQVFDLElBQzFCQSxFQUFHUCxLQUFLaEIsWUFJcEJnQixLQUFLUixPQUFTYSxJQUNOTCxLQUFLRyxTQUFXakIsSUFDaEJjLEtBQUtLLE9BQVNBLEVBQ2RMLEtBQUtHLE9BQVNoQixFQUNkYSxLQUFLRSxnQkFBZ0JJLFNBQVFDLElBQ3pCQSxFQUFHUCxLQUFLSyxhQUtwQixJQUNJTixFQUFTQyxLQUFLVCxRQUFTUyxLQUFLUixRQUM5QixNQUFPZ0IsR0FDTFIsS0FBS1IsT0FBT2dCLElBSXBCLEtBQUtDLEVBQWFDLEdBRWRELEVBQXFDLG1CQUFoQkEsRUFBNkJBLEVBQWN6QixHQUFTQSxFQUN6RTBCLEVBQzBCLG1CQUFmQSxFQUNEQSxFQUNBTCxJQUNJLE1BQU1BLEdBSXBCLE1BQU1NLEVBQVUsSUFBSUMsU0FBUSxDQUFDckIsRUFBU0MsS0FFOUJRLEtBQUtHLFNBQVdsQixHQUNoQjRCLFlBQVcsS0FDUCxJQUNJLElBQUlDLEVBQVNMLEVBQVlULEtBQUtoQixPQUM5QkksRUFBZXVCLEVBQVNHLEVBQVF2QixFQUFTQyxHQUMzQyxNQUFPZ0IsR0FDTGhCLEVBQU9nQixNQUVaLEdBSUhSLEtBQUtHLFNBQVdoQixHQUNoQjBCLFlBQVcsS0FDUCxJQUNJLElBQUlDLEVBQVNKLEVBQVdWLEtBQUtLLFFBQzdCakIsRUFBZXVCLEVBQVNHLEVBQVF2QixFQUFTQyxHQUMzQyxNQUFPZ0IsR0FDTGhCLEVBQU9nQixNQUVaLEdBSUhSLEtBQUtHLFNBQVdqQixJQUNoQmMsS0FBS0MsaUJBQWlCYyxNQUFLLEtBQ3ZCRixZQUFXLEtBQ1AsSUFDSSxJQUFJQyxFQUFTTCxFQUFZVCxLQUFLaEIsT0FDOUJJLEVBQWV1QixFQUFTRyxFQUFRdkIsRUFBU0MsR0FDM0MsTUFBT2dCLEdBQ0xoQixFQUFPZ0IsTUFFWixNQUdQUixLQUFLRSxnQkFBZ0JhLE1BQUssS0FDdEJGLFlBQVcsS0FDUCxJQUNJLElBQUlDLEVBQVNKLEVBQVdWLEtBQUtoQixPQUM3QkksRUFBZXVCLEVBQVNHLEVBQVF2QixFQUFTQyxHQUMzQyxNQUFPZ0IsR0FDTGhCLEVBQU9nQixNQUVaLFVBSWYsT0FBT0csSSIsImZpbGUiOiJwcm9taXNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiTXlQcm9taXNlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIk15UHJvbWlzZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLy8g5a6a5LmJcHJvbWlzZeWvueixoeeahOS4ieenjeeKtuaAgVxyXG5jb25zdCBGVUxGSUxMRUQgPSAnZnVsZmlsbGVkJ1xyXG5jb25zdCBQRU5ESU5HID0gJ3BlbmRpbmcnXHJcbmNvbnN0IFJFSkVDVEVEID0gJ3JlamVjdGVkJ1xyXG5cclxuZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UocHJvbWlzZTIsIHgsIHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgLy8g5b6q546v5byV55So5oql6ZSZXHJcbiAgICBpZiAoeCA9PT0gcHJvbWlzZTIpIHtcclxuICAgICAgICAvLyByZWplY3TmiqXplJlcclxuICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0NoYWluaW5nIGN5Y2xlIGRldGVjdGVkIGZvciBwcm9taXNlJykpXHJcbiAgICB9XHJcbiAgICAvLyDpmLLmraLlpJrmrKHosIPnlKhcclxuICAgIGxldCBjYWxsZWRcclxuICAgIC8vIHjkuI3mmK9udWxsIOS4lHjmmK/lr7nosaHmiJbogIXlh73mlbBcclxuICAgIGlmICh4ICE9IG51bGwgJiYgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyB8fCB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJykpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBBK+inhOWumu+8jOWjsOaYjnRoZW4gPSB455qEdGhlbuaWueazlVxyXG4gICAgICAgICAgICBsZXQgdGhlbiA9IHgudGhlblxyXG4gICAgICAgICAgICAvLyDlpoLmnpx0aGVu5piv5Ye95pWw77yM5bCx6buY6K6k5pivcHJvbWlzZeS6hlxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoZW4gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIOWwseiuqXRoZW7miafooYwg56ys5LiA5Liq5Y+C5pWw5pivdGhpcyAgIOWQjumdouaYr+aIkOWKn+eahOWbnuiwgyDlkowg5aSx6LSl55qE5Zue6LCDXHJcbiAgICAgICAgICAgICAgICB0aGVuLmNhbGwoXHJcbiAgICAgICAgICAgICAgICAgICAgeCxcclxuICAgICAgICAgICAgICAgICAgICB5ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5oiQ5Yqf5ZKM5aSx6LSl5Y+q6IO96LCD55So5LiA5LiqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsZWQpIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmXnmoTnu5Pmnpzkvp3ml6fmmK9wcm9taXNlIOmCo+Wwsee7p+e7reino+aekFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlUHJvbWlzZShwcm9taXNlMiwgeSwgcmVzb2x2ZSwgcmVqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5oiQ5Yqf5ZKM5aSx6LSl5Y+q6IO96LCD55So5LiA5LiqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsZWQpIHJldHVyblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZWQgPSB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpIC8vIOWksei0peS6huWwseWksei0peS6hlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoeCkgLy8g55u05o6l5oiQ5Yqf5Y2z5Y+vXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIOS5n+WxnuS6juWksei0pVxyXG4gICAgICAgICAgICBpZiAoY2FsbGVkKSByZXR1cm5cclxuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZVxyXG4gICAgICAgICAgICAvLyDlj5Z0aGVu5Ye66ZSZ5LqG6YKj5bCx5LiN6KaB5Zyo57un57ut5omn6KGM5LqGXHJcbiAgICAgICAgICAgIHJlamVjdChlKVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzb2x2ZSh4KVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyDliJvlu7pwcm9taXNl5p6E6YCg57G7XHJcbmNsYXNzIE15UHJvbWlzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvcikge1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZUNhbGxiYWNrcyA9IFtdXHJcbiAgICAgICAgdGhpcy5yZWplY3RDYWxsYmFja3MgPSBbXVxyXG5cclxuICAgICAgICAvLyDliJ3lp4vljJZcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IFBFTkRJTkdcclxuICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkXHJcbiAgICAgICAgdGhpcy5yZWFzb24gPSB1bmRlZmluZWRcclxuXHJcbiAgICAgICAgLy8g54q25oCB5L+u5pS55Ye95pWwXHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gdmFsdWUgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IFBFTkRJTkcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBGVUxGSUxMRURcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZUNhbGxiYWNrcy5mb3JFYWNoKGZuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlamVjdCA9IHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gUEVORElORykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFzb24gPSByZWFzb25cclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gUkVKRUNURURcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0Q2FsbGJhY2tzLmZvckVhY2goZm4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMucmVhc29uKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcy5yZXNvbHZlLCB0aGlzLnJlamVjdClcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcilcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhlbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xyXG4gICAgICAgIC8vIHRoZW7mlrnms5XmsqHmnInmj5Dkvpvlm57osIPmlrnms5Xml7bliJ3lp4vljJbkuIDkuItcclxuICAgICAgICBvbkZ1bGZpbGxlZCA9IHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJyA/IG9uRnVsZmlsbGVkIDogdmFsdWUgPT4gdmFsdWVcclxuICAgICAgICBvblJlamVjdGVkID1cclxuICAgICAgICAgICAgdHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgICAgID8gb25SZWplY3RlZFxyXG4gICAgICAgICAgICAgICAgOiByZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICDph43mlrDlrp7kvovljJbkuIDkuKpwcm9taXNl5a+56LGhXHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgLy8g5a+56LGh5Li6RlVMRklMTEVE54q25oCB5pe277yM6LCD55So5Lyg5YWl55qEb25GdWxmaWxsZWTmlrnms5XvvIzlubbmoLnmja7ov5Tlm57lgLzmnaXnoa7lrppwcm9taXNl5a+56LGh55qE54q25oCB77yM5aaC5p6c5oqb5Ye66ZSZ6K+v77yM55u05o6l5bCG54q25oCB572u5Li6RlVMRklMTEVEXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gRlVMRklMTEVEKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gb25GdWxmaWxsZWQodGhpcy52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgcmVzdWx0LCByZXNvbHZlLCByZWplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDApXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOWvueixoeeKtuaAgeS4ulJFSkVDVEVE54q25oCB5pe277yM6LCD55So5Lyg5YWl55qEb25SZWplY3RlZOaWueazle+8jOW5tuagueaNrui/lOWbnuWAvOadpeehruWumnByb21pc2XnmoTnirbmgIHvvIzlpoLmnpzov5nkuKrmlrnms5Xmipvlh7rplJnor6/vvIznm7TmjqXnva7kuLpSRUpFQ1RFRFxyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IFJFSkVDVEVEKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gb25SZWplY3RlZCh0aGlzLnJlYXNvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgcmVzdWx0LCByZXNvbHZlLCByZWplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDApXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOWmguaenOeKtuaAgeS4unBlbmRpbmfnirbmgIHml7bvvIzlsIblm57osIPmlrnms5XmlL7liLDkuIrkuIDkuKpwcm9taXNl5a+56LGh55qE5Zue6LCD5qCI5Lit77yM5Zug5Li65LiN56Gu5a6a5LiK5LiA5LiqcHJvbWlzZeeahOacgOe7iOeKtuaAgeS4uuS7gOS5iO+8jOaJgOS7peWwhm9uUmVzb2x2ZSxvblJlamVjdOmDveaUvuWcqOS4iuS4gOS4qnByb21pc2Xlr7nosaHnmoTmiJDlip/lkozlpLHotKXlm57osIPmoIjkuK1cclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSBQRU5ESU5HKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmVDYWxsYmFja3MucHVzaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gb25GdWxmaWxsZWQodGhpcy52YWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVQcm9taXNlKHByb21pc2UsIHJlc3VsdCwgcmVzb2x2ZSwgcmVqZWN0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMClcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3RDYWxsYmFja3MucHVzaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gb25SZWplY3RlZCh0aGlzLnZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZVByb21pc2UocHJvbWlzZSwgcmVzdWx0LCByZXNvbHZlLCByZWplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCAwKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHByb21pc2VcclxuICAgIH1cclxufVxyXG5leHBvcnQgZGVmYXVsdCBNeVByb21pc2VcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==